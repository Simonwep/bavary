/*! Bavary 0.0.2 MIT | https://github.com/Simonwep/bavary */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Bavary=t():e.Bavary=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist",n(n.s=18)}([function(e,t,n){const r=n(6);e.exports=(e,t,...n)=>r(e,t,...n)?e.next():null},function(e,t){e.exports=e=>(t,...n)=>{t.stash();const r=e(t,...n);return null!==r?(t.recycle(),r):(t.pop(),null)}},function(e,t,n){const r=n(0);e.exports=(e,t,...n)=>{const o=r(e,t,...n);if(o)return o;const u=e.hasNext()?e.peek():null;if(null!==u){const r=n.length?` "${n.join(" / ")}"`:"",o=u.type===t?"":` (${t})`,s=u.type===t?"":` (${u.type})`;e.throwError(`Expected${r+o} but got "${u.value}"${s}`)}else e.throwError("Unxpected end of input.")}},function(e,t){e.exports={isPunctuation:e=>e<"0"||e>"z"||e>"9"&&e<"A"||e>"Z"&&e<"a",isNonWhitespace:e=>e>="a"&&e<="z"||e>="A"&&e<="Z"||"_"===e,isWhiteSpace:e=>"\t"===e||"\n"===e||" "===e,isNumeric:e=>e>="0"&&e<="9"}},function(e,t,n){const r=n(9),o=n(10),u=n(11);e.exports=u((e,t,n,u={obj:{},str:"",pure:!0})=>{e.stash();const s=t.value;for(let t=0;t<s.length;t++){const l=s[t];if(!o(e,l,n,u))return e.pop(),r(s,u.obj,!0),null}return e.recycle(),u.pure?u.str:u.obj})},function(e,t,n){const r=n(25);e.exports=(e,t=null)=>{const n=[];let o=0;if("string"!=typeof t&&null!==t)throw"Source must be a string.";return{stash:()=>n.push(o),pop:()=>o=n.pop(),next:()=>e[o++],peek:()=>e[o],hasNext:()=>o<e.length,recycle:()=>n.pop(),throwError(n){if(!t)throw n;if(o<e.length){const u=e[o];throw new r(t,n,u.start,u.end)}throw new r(t,n,o,o)},get index(){return o}}}},function(e,t){e.exports=(e,t,...n)=>{const r=e.type?e:e.peek();return!(!r||r.type!==t)&&(!n.length||n.includes(r.value))}},function(e,t){function n(e,t,r){for(const{variant:o,name:u,value:s}of e){const e=`${r}:${u}`;if(t.has(e))throw`Type "${e}" is already declared in the scope of "${u}".`;"export"===o&&t.set(e,s),"block"===s.type&&n(s.value,t,e)}}e.exports=(e,t,r)=>{const o=new Map(null!==t?[...t]:null);for(const t of e){const{name:e,value:u,type:s}=t;if(o.has(e))throw`Type "${e}" has been already declared.`;if("declaration"!==s)throw`Unknown type "${s}"`;"function"==typeof r&&r(t),null!==e&&o.set(e,u),"block"===u.type&&n(u.value,o,e)}return o}},function(e,t,n){const r=n(4),o=n(24);e.exports=(e,t,n,u)=>{switch(t.type){case"group":return r(e,t,n,u);case"block":return o(e,t,n);default:throw`Unknown declaration type "${t.type}"`}}},function(e,t){e.exports=function e(t,n,r=!1){for(const o of t)"type"===o.type&&o.tag&&(void 0===n[o.tag]||r)?n[o.tag]=null:"group"===o.type&&e(o.value,n)}},function(e,t,n){const r=n(20),o=n(21),u=n(22),s=n(23);e.exports=(e,t,l,i={obj:{},str:"",pure:!0})=>{switch(e.stash(),t.type){case"combinator":if(!o(e,t,l,i))return e.pop(),!1;break;case"string":if(!u(e,t,i))return e.pop(),!1;break;case"character-range":if(!r(e,t,i))return e.pop(),!1;break;case"type":if(!s(e,t,l,i))return e.pop(),!1;break;case"group":if(!n(4)(e,t,l,i)){if(t.multiplier){const{type:e}=t.multiplier;if("one-infinity"!==e)break}return e.pop(),!1}break}return e.recycle(),!0}},function(e,t){e.exports=e=>(t,n,r,...o)=>{const u=()=>e(t,n,r,...o),s=()=>{const e=[];for(let t;t=u();)e.push(t);return e};if(n.multiplier){const{type:e,value:t}=n.multiplier;switch(e){case"zero-infinity":return s();case"one-infinity":{const e=s();return e.length?e:null}case"range":{const{start:e,end:n}=t,r=s();return r.length<e||r.length>n?null:r}}}return u()}},function(e,t,n){const r=n(0),o=n(2),u=n(1),s=n(13),l=n(15);e.exports=u(e=>{const t=r(e,"kw","entry","default","export"),u=l(e);if(u){if(o(e,"punc","="),u.multiplier)return e.throwError("Declaration type cannot contain multipliers.");if(u.tag)return e.throwError("Declaration type cannot have a tag.")}else if(!t)return e.throwError("Expected declaration.");const i=s(e)||n(34)(e);return i?"export"===t&&"block"!==i.type?e.throwError("Types can only be exported in blocks."):{type:"declaration",name:u?u.value:null,variant:t?t.value:null,value:i}:e.throwError("A declaration consists of one group.")})},function(e,t,n){const r=n(0),o=n(29),u=n(2),s=n(1),l=n(6),i=n(14),c=n(30);e.exports=s(e=>{if(!r(e,"punc","["))return null;const t=[],s=o(n(15),n(13),n(32),n(16));let a;for(;!l(e,"punc","]");){const n=s(e),r=c(e);if(!n)return e.throwError("Expected a type, group or raw string.");if(r){if(a){if(r.value===a.sign){a.value.push(n);continue}t.push(a),a=null}a={type:"combinator",sign:r.value,value:[n]}}else a?(a.value.push(n),t.push(a),a=null):t.push(n)}return a&&t.push(a),u(e,"punc","]"),{type:"group",multiplier:i(e),value:t}})},function(e,t,n){const r=n(0),o=n(2),u=n(1),s={"*":"zero-infinity","+":"one-infinity","?":"optional"};e.exports=u(e=>{const t=r(e,"punc","*","+","?","{");if(t&&"{"===t.value){const t=o(e,"num");o(e,"punc",",");const n=o(e,"num");return t.value<0||n.value<0?e.throwError("Range values cannot contain negative values."):n.value-t.value<0?e.throwError("The difference between start and end-value cannot be negative or zero."):(o(e,"punc","}"),{type:"range",value:{start:t.value,end:n.value}})}return t?{type:s[t.value],value:t.value}:null})},function(e,t,n){const r=n(31),o=n(0),u=n(2),s=n(1),l=n(14),i=n(16);e.exports=s(e=>{if(!o(e,"punc","<"))return null;const t=r(e);if(!t)return e.throwError("Expected identifier.");let n=null;if(o(e,"punc","#")){if(!(n=i(e)||r(e)))return e.throwError("Expected string or identifier as tag.");n=n.value}return u(e,"punc",">"),{type:"type",multiplier:l(e),value:t.value,tag:n}})},function(e,t,n){const r=n(0),o=n(1);e.exports=o(e=>{const t=r(e,"str");return t&&!t.value.length?e.throwError("Strings shouldn't be empty."):t?{type:"string",value:t.value}:null})},function(e,t){e.exports=(e,t)=>{let n="";for(;e.hasNext()&&t(e.peek());)n+=e.next();return n}},function(e,t,n){e.exports={compile:n(19),version:"0.0.2"}},function(e,t,n){const r=n(7),o=n(8),u=n(5),s=n(28);e.exports=e=>{const t=s(e);let n=null;const l=r(t,null,({variant:e,name:t,value:r})=>{if("entry"===e){if(n)throw`There can only be one entry type. Got "${t}" as second one.`;n=r}});if(!n)throw"Couldn't resolve entry type. Use the entry keyword to declare one.";return e=>{const t=u(e),r=o(t,n,l);return t.hasNext()?null:r}}},function(e,t){e.exports=(e,{value:{from:t,to:n}},r)=>{if(!e.hasNext())return!1;const o=e.next(),u=o.charCodeAt(0);return u>=t&&u<=n&&(r.str+=o,!0)}},function(e,t,n){const r=n(9);e.exports=(e,t,o,u)=>{const s=n(10);switch(e.stash(),t.sign){case"|":{const n=t.value;for(let t=0;t<n.length;t++)if(s(e,n[t],o,u))return e.recycle(),r(n.slice(t),u.obj),!0;break}case"&&":case"&":{const n=[...t.value];for(let t=0;t<n.length;t++)s(e,n[t],o,u)&&(n.splice(t,1),t=-1);if(r(n,u.obj),!n.length||"&&"===t.sign&&n.length<t.value.length)return e.recycle(),!0;break}default:throw`Unknown combinator "${t.sign}"`}return e.pop(),null}},function(e,t){e.exports=(e,{value:t},n)=>{if(!e.hasNext())return!1;e.stash();for(let n=0;n<t.length;n++){if(e.next()!==t[n])return e.pop(),!1}return e.recycle(),n.str+=t,!0}},function(e,t,n){const r=n(11);e.exports=(e,t,o,u)=>{const s=n(8),{value:l}=t;if(!o.has(l))throw`Cannot resolve "${l}"`;e.stash();const i=o.get(l),c=r(()=>s(e,i,o))(e,t,o,u);if(t.tag&&(u.obj[t.tag]=c,c&&(u.pure=!1)),!c)return e.pop(),t.multiplier&&"optional"===t.multiplier.type;if(!t.tag)if(Array.isArray(c))u.str+=c.join("");else{if("string"!=typeof c)throw`Type "${t.value}" is missing a tag.`;u.str+=c}return e.recycle(),!0}},function(e,t,n){const r=n(7),o=n(4);e.exports=(e,t,n)=>{let u=null;const s=r(t.value,n,({variant:e,value:t})=>{if("default"===e){if(null!==u)throw"There can only be one default export.";u=t}else if("entry"===e)throw"The entry type needs to be in the global scope."});if(!u)throw"Missing default export.";return o(e,u,s)}},function(e,t,n){const r=n(26);e.exports=class extends Error{constructor(e,t,n,o){super(`\n${r(e,t,n,o)}`),this.start=n,this.end=o,this.name="Parsing Error"}}},function(e,t,n){const r=n(27),o=10;function u(e){return e.replace(/^[\n\r]+|[\n\r ]+$/g,"")}function s(e,t,n=-1){return e===n?t:e}e.exports=(e,t,n,l)=>{const i=s(r(e,"\n",n),0),c=s(e.indexOf("\n",l),e.length),a=function(e,t){const n=[];let s=t;for(;n.length<o;){const t=r(e,"\n",s-1);if(!~t)break;{const r=e.substring(t,s);n.splice(0,0,u(r)),s=t}}if(!n.length&&e.length)n.push(u(e));else if(n.length<o){const t=u(e.slice(0,s));t&&n.splice(0,0,t)}return n}(e,c),p=n-i;let f="";const h=function(e){let t=0;for(const n of e)t+="\n"===n?1:0;return t}(e),y=Math.max(String(h).length,2);for(;a.length&&!a[0].trim();)a.splice(0,1);const x=h-a.length;x>=1&&(f+=`... (${x} line${1===x?"":"s"} omitted)\n`);for(let e=0;e<a.length;e++){const t=a[e],n=h-a.length+e+1;f+=`${String(n).padStart(y,"0")}: ${t}\n`}return f+=`${" ".repeat(p+y)}^\n`,f+=t}},function(e,t){e.exports=(e,t,n)=>{if("string"!=typeof t||"string"!=typeof e||n<t.length-1)return-1;"number"!=typeof n&&(n=e.length-1);const r=t.length-1;for(let o=n,u=r;o>=0;o--)if(e[o]===t[u]){if(!~--u)return o}else u!==r&&(u=r,o++);return-1}},function(e,t,n){const r=n(12),o=n(35),u=n(5);e.exports=e=>{const t=u(o(e),e),n=[];for(;t.hasNext();){const e=r(t);if(!e)return t.throwError("Expected type-declaration.");n.push(e)}return n}},function(e,t){e.exports=(...e)=>t=>{for(const n of e){const e=n(t);if(e)return e}return null}},function(e,t,n){const r=n(0),o=n(1);e.exports=o(e=>{const t=r(e,"punc","|","&");return t?("&"===t.value&&r(e,"punc","&")&&(t.value+="&"),{type:"combinator",value:t.value}):null})},function(e,t,n){const r=n(1);e.exports=r(e=>{let t="";for(;e.hasNext(!0);){const{type:n,value:r}=e.peek(!0);if("kw"!==n&&"num"!==n&&("punc"!==n||"-"!==r&&":"!==r))break;t+=r,e.next(!0)}return t.length?{type:"identifier",value:t||null}:e.throwError("An identifier cannot be empty.")})},function(e,t,n){const r=n(33),o=n(0),u=n(1),s=e=>{const t=o(e,"str");if(t){const{value:e}=t;return 1===e.length?e.charCodeAt(0):null}return r(e)};e.exports=u(e=>{let t=s(e);if(null===t||!o(e,"kw","to"))return null;let n=s(e);return null===n?e.throwError("Expected range-end"):(n<t&&([n,t]=[t,n]),{type:"character-range",value:{from:t,to:n}})})},function(e,t,n){const r=n(0),o=n(1);e.exports=o(e=>{if(!r(e,"punc","\\")||!e.hasNext())return null;const t=String(e.next().value);if(!t.startsWith("u"))return null;if(5!==t.length)return e.throwError('An unicode-escape sequence consists out of an "u" followed by a code-point.');const n=t.slice(1);for(const t of n){const n=t.charCodeAt(0);if(n<48||n>57&&n<97||n>102)return e.throwError("Invalid unicode-range.")}return parseInt(n,16)})},function(e,t,n){const r=n(0),o=n(2),u=n(1),s=n(6),l=n(12);e.exports=u(e=>{if(!r(e,"punc","{"))return null;const t=[];for(;!s(e,"punc","}");)t.push(l(e));return o(e,"punc","}"),{type:"block",value:t}})},function(e,t,n){const r=n(5),o=n(17),{isWhiteSpace:u}=n(3),s=[n(36),n(38),n(39),n(40)];e.exports=e=>{const t=r(e),n=[];e:for(;t.hasNext()&&(o(t,u),t.hasNext());){for(const e of s){const r=t.index,o=e(t);if(o){if("/"===o.value&&t.hasNext()&&"/"===t.peek()){for(;t.hasNext()&&"\n"!==t.peek();)t.next();continue e}n.push({...o,start:r,end:t.index});continue e}}throw"Failed to parse input sequence."}return n}},function(e,t,n){const r=n(37);e.exports=e=>{for(const t of["'",'"',"`"]){if(e.stash(),e.peek()===t){e.next();const n=r(e,t);if(null!==n)return{type:"str",value:n}}e.pop()}return null}},function(e,t){e.exports=(e,t)=>{let n=!1,r="";for(let o=e.next();;o=e.next())if(n)r+=o,n=!1;else if("\\"===o)n=!0;else{if(o===t)return r;if(!e.hasNext())break;r+=o}return null}},function(e,t,n){const{isNonWhitespace:r,isNumeric:o}=n(3),u=n(17);e.exports=e=>{if(r(e.peek())){const t=u(e,e=>r(e)||o(e));return t?{type:"kw",value:t.toLowerCase()}:null}return null}},function(e,t,n){const{isNumeric:r}=n(3);e.exports=e=>{let t="";for(;e.hasNext();){const n=e.peek();if(!r(n))break;t+=n,e.next()}return t.length?{type:"num",value:Number(t)}:null}},function(e,t,n){const{isPunctuation:r}=n(3);e.exports=e=>r(e.peek())?{type:"punc",value:e.next()}:null}])}));
//# sourceMappingURL=bavary.min.js.map